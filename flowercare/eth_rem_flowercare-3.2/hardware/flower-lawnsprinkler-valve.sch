v 20080127 1
T 15300 27000 9 14 1 0 0 7 1
Add-on electronics for capacitive humidity sensor
T 24100 16500 9 12 1 0 0 0 2
(C) Guido Socher, tuxgraphics.org
http://tuxgraphics.org/electronics/
C 20100 21000 1 0 0 gnd-1.sym
C 20100 17600 1 0 0 gnd-1.sym
C 20900 18300 1 0 0 resistor-2.sym
{
T 21600 18200 5 10 1 1 180 0 1
value=1K
T 20900 18300 5 10 0 1 270 0 1
footprint=R0w4
}
N 20800 18400 20900 18400 4
C 20300 20600 1 270 0 diode-3.sym
{
T 20300 20600 5 10 0 1 270 0 1
footprint=R0w8
}
C 20400 20600 1 0 0 vddarrow-1.sym
{
T 19600 20700 5 10 1 1 0 0 1
value=RAWDC
}
C 23900 18100 1 90 1 vccarrow-1.sym
{
T 23700 18600 5 10 1 1 270 2 1
value=3V3
}
C 25200 18100 1 180 1 led-2.sym
{
T 25200 18100 5 10 0 1 180 6 1
footprint=LED 3
T 25200 18200 5 10 1 1 0 0 1
value=redLED
}
C 24300 17900 1 0 0 resistor-2.sym
{
T 25000 17800 5 10 1 1 180 0 1
value=270
T 24300 17900 5 10 0 1 270 0 1
footprint=R0w4
}
N 26200 19300 26200 18000 4
N 26200 18000 26100 18000 4
N 23900 18000 24300 18000 4
C 18500 19300 1 0 0 connector2-1.sym
{
T 18500 19300 5 10 0 1 0 0 1
footprint=CONNECTOR 2 1
T 18400 20200 5 10 1 1 0 0 1
value=CONN1
}
C 20800 17900 1 0 1 BC547-1.sym
{
T 20800 17900 5 10 0 1 0 0 1
footprint=TO92_BC5x7
}
T 18400 18800 9 10 1 0 0 0 2
external
relay
N 20200 20600 20200 19800 4
N 20200 18900 20200 19500 4
C 20200 23900 1 270 1 vccarrow-1.sym
{
T 20100 24300 5 10 1 1 180 6 1
value=3V3
}
C 18500 21100 1 0 0 connector10-1.sym
{
T 18500 21100 5 10 0 1 0 0 1
footprint=CONNECTOR 10 1
T 18300 24400 5 10 1 1 0 0 1
value=CONN5
}
N 20500 19700 20500 19500 4
C 16000 22100 1 180 1 connector3-1.sym
{
T 15200 21600 5 10 1 1 0 0 1
value=ds18s20
}
B 19200 17300 7700 8800 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 20900 25400 9 12 1 0 0 0 1
Tuxgraphics ethernet board with atmage328p
C 17400 17400 1 0 1 relay-1.sym
L 16500 19500 16500 20200 3 0 0 0 -1 -1
V 16400 19300 100 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
N 17700 21300 19200 21300 4
N 17100 20200 18000 20200 4
N 18000 20200 18000 19800 4
N 18000 19800 19200 19800 4
N 18000 17400 18000 19500 4
N 18000 19500 19200 19500 4
T 21200 19400 9 10 1 0 0 0 2
Only the relevant interconnections with the
tuxgraphics ethernet board are shown here.
T 7600 17700 9 10 1 0 0 0 4
Use a 12V relay and adapt the relay to 16V with a small resistor (10-22 Ohm).
Note the 1N4001 flyback diode near the sprinkler valve. 

Note that lawn sprinkler valves draw about 0.5 to 1A current.
N 17700 24000 17700 21900 4
T 14800 21900 9 10 1 0 0 0 1
Temp. sensor
C 27700 24500 1 180 0 connector8-1.sym
{
T 27200 24700 5 10 1 1 0 0 1
value=CONN4
}
C 25900 24300 1 0 0 vccarrow-1.sym
{
T 25900 24800 5 10 1 1 0 0 1
value=3V3
}
C 25900 21900 1 0 0 gnd-1.sym
N 17700 24000 19200 24000 4
C 10100 21100 1 90 0 connector2-1.sym
{
T 9300 21100 5 10 1 1 90 0 1
refdes=HUMI1
}
N 27000 22500 28300 22500 4
N 28300 22500 28300 26500 4
N 28300 26500 16700 26500 4
C 14600 23400 1 90 0 resistor-2.sym
{
T 14700 23700 5 10 1 1 0 0 1
value=10k
T 14600 23400 5 10 0 1 0 0 1
footprint=R0w4
T 14700 23400 5 10 1 1 0 0 1
refdes=R1
}
C 14400 23100 1 0 0 gnd-1.sym
C 10400 25600 1 180 1 opamp-part3-1.sym
{
T 11100 25000 5 10 1 1 180 6 1
refdes=U2
}
C 14500 24600 1 0 0 opamp-part2-1.sym
{
T 15000 25400 5 10 1 1 0 0 1
refdes=U2
}
C 8700 25400 1 270 0 capacitor-1.sym
{
T 9300 24800 5 10 1 1 180 0 1
refdes=C1
T 9500 24500 5 10 1 1 180 0 1
value=10nF
T 8700 25400 5 10 0 1 90 0 1
footprint=C100
}
C 10500 23400 1 90 0 resistor-2.sym
{
T 10600 23800 5 10 1 1 0 0 1
value=10k
T 10500 23400 5 10 0 1 0 0 1
footprint=R0w4
T 10600 23500 5 10 1 1 0 0 1
refdes=R2
}
C 10300 23100 1 0 0 gnd-1.sym
C 10800 24500 1 0 0 gnd-1.sym
C 8800 24200 1 0 0 gnd-1.sym
N 10400 25000 10400 24300 4
C 12200 24300 1 90 0 diode-1.sym
{
T 11800 25000 5 10 1 1 180 0 1
refdes=D1
T 11100 24600 5 10 1 1 0 0 1
value=1n4148
}
C 12000 25000 1 0 0 diode-1.sym
{
T 12300 25800 5 10 1 1 0 0 1
refdes=D2
T 12300 25500 5 10 1 1 0 0 1
value=1n4148
}
C 12900 24400 1 180 0 resistor-2.sym
{
T 12400 24000 5 10 1 1 180 0 1
value=10k
T 12900 24400 5 10 0 1 90 0 1
footprint=R0w4
T 12500 23900 5 10 1 1 0 0 1
refdes=R3
}
N 10400 24300 12000 24300 4
C 10800 25900 1 0 0 vddarrow-1.sym
{
T 10000 26000 5 10 1 1 0 0 1
value=RAWDC
}
N 10900 25600 10900 25900 4
T 10000 25800 9 10 1 0 0 0 1
5V-18V
N 11400 25200 12000 25200 4
C 13600 25200 1 270 0 capacitor-1.sym
{
T 14200 25100 5 10 1 1 180 0 1
refdes=C2
T 13700 24500 5 10 1 1 180 0 1
value=100nF
T 13600 25200 5 10 0 1 90 0 1
footprint=C100
}
C 13700 24000 1 0 0 gnd-1.sym
N 14500 24800 14500 24300 4
C 15400 24400 1 180 0 resistor-2.sym
{
T 15200 24100 5 10 1 1 180 0 1
value=6K8
T 15400 24400 5 10 0 1 90 0 1
footprint=R0w4
T 15000 24500 5 10 1 1 0 0 1
refdes=R4
}
N 15400 24300 15500 24300 4
N 15500 24300 15500 25000 4
C 16400 25100 1 180 0 resistor-2.sym
{
T 16200 24800 5 10 1 1 180 0 1
value=6K8
T 16400 25100 5 10 0 1 90 0 1
footprint=R0w4
T 16000 25200 5 10 1 1 0 0 1
refdes=R5
}
N 16400 25000 16700 25000 4
N 16700 25000 16700 26500 4
N 8500 25400 8500 22800 4
N 8500 22800 9600 22800 4
C 10000 24500 1 90 0 resistor-2.sym
{
T 9500 25000 5 10 1 1 0 0 1
value=1M
T 10000 24500 5 10 0 1 0 0 1
footprint=R0w4
T 10000 24500 5 10 1 1 0 0 1
refdes=R6
}
C 9800 24200 1 0 0 gnd-1.sym
T 17100 28000 9 17 1 0 0 0 1
ETH-flowercare, setup for 24V lawn sprinkler valves
N 19200 21900 18000 21900 4
N 18000 21900 18000 21600 4
N 18000 21600 17700 21600 4
N 19200 22200 18000 22200 4
N 18000 22800 18000 22200 4
T 11900 22500 9 10 1 0 0 0 1
OC0B=PD5=4.07kHz tone output
C 16500 25000 1 270 0 capacitor-1.sym
{
T 17100 24900 5 10 1 1 180 0 1
refdes=C3
T 16600 24300 5 10 1 1 180 0 1
value=100nF
T 16500 25000 5 10 0 1 90 0 1
footprint=C100
}
C 16600 23800 1 0 0 gnd-1.sym
N 12900 25200 12900 24300 4
C 13800 25300 1 180 0 resistor-2.sym
{
T 13400 25000 5 10 1 1 180 0 1
value=47k
T 13800 25300 5 10 0 1 90 0 1
footprint=R0w4
T 13200 25400 5 10 1 1 0 0 1
refdes=R7
}
N 13800 25200 14500 25200 4
T 10400 25500 9 10 1 0 0 0 1
3
T 10400 25100 9 10 1 0 0 0 1
2
T 11300 25300 9 10 1 0 0 0 1
1
T 14500 25300 9 10 1 0 0 0 1
5
T 14500 24900 9 10 1 0 0 0 1
6
T 15400 25100 9 10 1 0 0 0 1
7
T 11000 25600 9 10 1 0 0 0 1
8
T 10700 24700 9 10 1 0 0 0 1
4
T 10300 21200 9 10 1 0 0 0 3
two insulated metal sheets 
size: 10cm x 2.5 cm (4x1 inch)

T 9400 20800 9 10 1 0 0 0 1
Capacitve humidity sensor
C 8900 25200 1 0 0 capacitor-1.sym
{
T 9000 25500 5 10 1 1 0 0 1
refdes=C4
T 9200 25700 5 10 1 1 0 0 1
value=100nF
T 8900 25200 5 10 0 1 180 0 1
footprint=C100
}
N 8500 25400 8900 25400 4
N 9800 25400 10400 25400 4
C 15400 22600 1 0 0 capacitor-1.sym
{
T 15500 22900 5 10 1 1 0 0 1
refdes=C5
T 15700 23100 5 10 1 1 0 0 1
value=0.47uF-1uF
T 15400 22600 5 10 0 1 180 0 1
footprint=C100
}
N 16300 22800 18000 22800 4
N 15400 22800 9900 22800 4
T 10600 26500 9 10 1 0 0 0 1
1/2 TS272
T 14400 25800 9 10 1 0 0 0 1
1/2 TS272
N 19200 21600 18200 21600 4
N 18200 21600 18200 20900 4
N 18200 20900 14500 20900 4
N 18400 21300 18400 20700 4
C 13500 20900 1 0 0 switch-pushbutton-no-1.sym
{
T 13500 21300 5 10 1 1 0 0 1
refdes=PushButton
T 13900 21500 5 10 0 0 0 0 1
device=SWITCH_PUSHBUTTON_NO
}
N 13500 20700 18400 20700 4
N 13500 20700 13500 20900 4
T 13100 20500 9 10 1 0 0 0 1
Manual water start/stop
T 12000 26400 9 10 1 0 0 0 2

The max. voltage for the TS272 is 18V DC
T 20300 21500 9 10 1 0 0 0 1
to PB0
T 20300 21800 9 10 1 0 0 0 1
to PD6
T 20300 22100 9 10 1 0 0 0 1
to PD5
N 20200 19500 20500 19500 4
N 20200 20600 20500 20600 4
T 21900 18300 9 10 1 0 0 0 1
to PD7
T 25200 22400 9 10 1 0 0 0 1
to ADC0
T 25700 19500 9 10 1 0 0 0 1
to PB1
B 8000 22400 9300 5000 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
C 27700 20200 1 0 1 connector2-1.sym
{
T 27700 20200 5 10 0 1 0 6 1
footprint=CONNECTOR 2 1
}
C 25900 20100 1 0 0 gnd-1.sym
C 25900 20700 1 0 0 vddarrow-1.sym
{
T 24900 20800 5 10 1 1 0 0 1
value=RAWDC
}
N 16500 20200 16500 20400 4
N 16500 20400 14700 20400 4
N 15900 17400 15600 17400 4
N 15600 17400 15600 17100 4
T 14300 16700 9 10 1 0 0 0 1
to sprinkler valve
C 14400 19600 1 0 0 vddarrow-1.sym
{
T 13600 19600 5 10 1 1 0 0 1
value=RAWDC
}
N 14700 20400 14700 19600 4
N 14700 19600 14500 19600 4
C 14400 19000 1 0 0 gnd-1.sym
N 14500 19300 14700 19300 4
N 14700 19300 14700 17100 4
C 14700 17200 1 0 0 diode-1.sym
{
T 14900 17700 5 10 1 1 0 0 1
value=1n4001
}
T 27900 20500 9 10 1 0 0 0 1
16-18V DC
T 19000 26800 9 10 1 0 0 0 3
24V lawn sprinkler valves are made for use with
24V AC. They do already work with 16V DC. 16V DC allows 
you to power all components from just one power source.
C 18000 17500 1 180 0 resistor-2.sym
{
T 17900 17100 5 10 1 1 180 0 1
value=22 Ohm
T 18000 17500 5 10 0 1 90 0 1
footprint=R0w4
T 17400 17600 5 10 0 1 0 0 1
refdes=R7
}
